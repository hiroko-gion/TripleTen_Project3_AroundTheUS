!function(){"use strict";class e{constructor(e,t,r){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=r}_setEventListeners(){this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this)})),this._likeButton.addEventListener("click",(()=>{this._handleLikeButtton()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteButtton()}))}_handleLikeButtton(){this._likeButton.classList.toggle("card__like-button-active")}_handleDeleteButtton(){this._element.remove(),this._element=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._cardImageEl=this._element.querySelector(".card__image"),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this._element}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e){this._errorMessageEl=this._formElement.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageEl.textContent=e.validationMessage,this._errorMessageEl.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageEl=this._formElement.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageEl.textContent="",this._errorMessageEl.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputList.every((e=>e.validity.valid))}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this.toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}resetValidation(){this.toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}}document.querySelector("#card-template").content.firstElementChild;const r=document.querySelector(".cards__list"),n=document.querySelector(".profile__title"),o=document.querySelector(".profile__description"),i=document.querySelector("#profile-edit-modal"),s=document.forms["profile-form"],a=document.querySelector("#profile-edit-buttton"),l=(i.querySelector(".modal__close"),s.querySelector("#profile-title-input")),c=s.querySelector("#profile-description-input"),u=document.querySelector("#add-card-modal"),d=document.forms["add-card-form"],_=document.querySelector(".profile__add-button"),m=(u.querySelector(".modal__close"),document.querySelector(".card__title"),document.querySelector(".card__image"),d.querySelector(".modal__input_type_title")),h=d.querySelector(".modal__input_type_link"),p=document.querySelector("#preview-image-modal"),v=p.querySelector(".preview__card-image"),g=p.querySelector(".preview__image-title");function f(e){"Escape"===e.key&&y(document.querySelector(".modal_opened"))}function E(e){e.target===e.currentTarget&&y(e.currentTarget)}function S(e){e.classList.add("modal_opened"),document.addEventListener("keydown",f),e.addEventListener("mousedown",E)}function y(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",f),e.removeEventListener("mousedown",E)}function L(t){const n=function(t){return new e(t,"#card-template",k).generateCard()}(t);r.prepend(n)}function k(e){v.src=e._link,v.alt=e._name,g.textContent=e._name,S(p)}p.querySelector(".modal__close"),[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg "}].forEach(L),a.addEventListener("click",(()=>{l.value=n.textContent,c.value=o.textContent,S(i),B["profile-form"].resetValidation()})),document.querySelectorAll(".modal__close").forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>y(t)))})),s.addEventListener("submit",(function(e){e.preventDefault(),n.textContent=l.value,o.textContent=c.value,y(i)})),_.addEventListener("click",(()=>S(u))),d.addEventListener("submit",(function(e){e.preventDefault(),L({name:m.value,link:h.value}),e.target.reset(),y(u),B["add-card-form"].toggleButtonState()}));const B={};var q;q={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(q.formSelector)).forEach((e=>{const r=new t(q,e),n=e.getAttribute("name");B[n]=r,r.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVlELEVBQzNCQSxFQUFVM0Msa0JBQWtCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICAvLyB8fC0tLUNBUkQgQ09OU1RSVUNUT1ItLS18fFxuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgLy8gfHwtLS1TRVQgVVAgRVZFTlQgTElTVEVSTkVSUy0tLXx8XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0dG9uKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHR0b24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQnV0dHRvbigpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbi1hY3RpdmVcIik7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQnV0dHRvbigpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgLy8gfHwtLS0tR0VUIFRFTVBMQVRFLS0tLXx8XG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICAvLyB8fC0tLUdFTkVSQVRFIENBUkQtLS0tIHx8XG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWwpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWwuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiAhdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8tLS0tRU5BQkxFIFZBTElEQVRJT04tLS0tLy9cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi8uLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vLi4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZyBcIixcbiAgfSxcbl07XG5cbi8vIHx8LS0tLS0tLS0tLS0tLS0gICAgIEZPUk1WQUxJREFUT1IgQ09ORklHICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbi8vIHx8LS0tLS0tLS0tLS0tLS0gICAgIENBUkQgVEVNUExBVEUgRUxFTUVOVCAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XG5jb25zdCBjYXJkVGVtcGxhdGUgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcblxuLy8gfHwtLS0tLS0tLS0tLS0tLS0gICAgU0VMRUNUIENBUkQgTElTVCBFTEVNRU5UICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG4vLyB8fC0tLS0tLS0tLS0tLS0tLSAgICBQUk9GSUxFIEVESVQgTU9EQUwgRUxFTUVOVFMgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZm9ybVwiXTtcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0Q2xvc2VCdXR0b24gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBwcm9maWxlRWRpdEZvcm0ucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBwcm9maWxlRWRpdEZvcm0ucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuXG4vLyB8fC0tLS0tLS0tLS0tLS0tLSAgICBBREQgTkVXIENBUkQgTU9EQUwgRUxFTUVOVFMgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmNvbnN0IGFkZE5ld0NhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJhZGQtY2FyZC1mb3JtXCJdO1xuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IGFkZE5ld0NhcmRDbG9zZUJ1dHRvbiA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcbmNvbnN0IGFkZE5ld0NhcmRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG5jb25zdCBhZGROZXdDYXJkSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuY29uc3QgYWRkTmV3Q2FyZFRpdGxlSW5wdXQgPSBhZGROZXdDYXJkRm9ybS5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9faW5wdXRfdHlwZV90aXRsZVwiXG4pO1xuY29uc3QgYWRkTmV3Q2FyZExpbmsgPSBhZGROZXdDYXJkRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90eXBlX2xpbmtcIik7XG5cbi8vIHx8LS0tLS0tLS0tLS0tLS0tICAgIFBSRVZJRVcgSU1BR0UgTU9EQUwgRUxFTUVOVFMgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xuY29uc3QgcHJldmlld0ltYWdlID0gcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5wcmV2aWV3X19jYXJkLWltYWdlXCIpO1xuY29uc3QgcHJldmlld1RpdGxlID0gcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5wcmV2aWV3X19pbWFnZS10aXRsZVwiKTtcbmNvbnN0IHByZXZpZXdDbG9zZUJ1dHRvbiA9IHByZXZpZXdJbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuXG4vLyB8fC0tLS0tLS0tLS0tLS0tLSAgICBDTE9TRSBNT0RBTCBXSVRIIEVTQ0FQRSBLRVkgRlVOQ1RJT04gICAtLS0tLS0tLS0tLS0tLS0tLXx8XG5mdW5jdGlvbiBjbG9zZU1vZGFsQnlFc2NhcGUoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3Qgb3Blbk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XG4gICAgY2xvc2VNb2RhbChvcGVuTW9kYWwpO1xuICB9XG59XG5cbi8vIHx8LS0tLS0tLS0tLS0tLS0tICAgIENMT1NFIE1PREFMUyBQUkVTU0lORyBPVVRTSURFIE9GIE1PREFMIEZVTkNUSU9OICAgLS0tLS0tfHxcbmZ1bmN0aW9uIGNsb3NlTW9kYWxPdXRzaWRlKGV2dCkge1xuICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcbiAgICBjbG9zZU1vZGFsKGV2dC5jdXJyZW50VGFyZ2V0KTtcbiAgfVxufVxuXG4vLyB8fC0tLS0tLS0tLS0tLS0tLSAgICBPUEVOIEFORCBDTE9TRSBNT0RBTFMgRlVOQ1RJT04gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgY2xvc2VNb2RhbEJ5RXNjYXBlKTtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjbG9zZU1vZGFsT3V0c2lkZSk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgY2xvc2VNb2RhbEJ5RXNjYXBlKTtcbiAgbW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjbG9zZU1vZGFsT3V0c2lkZSk7XG59XG5cbi8vIHx8LS0tLS0tLS0tLS0tICAgICAgUkVOREVSIENBUkQgRlVOQ1RJT04gICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGNhcmREYXRhKTtcbiAgY2FyZExpc3RFbC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbn1cblxuLy8gfHwtLS0tLS0tLS0tLS0tICAgICBDUkVBVEUgQ0FSRCBGVU5DVElPTiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljayk7XG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufVxuXG4vLyB8fC0tLS0tLS0tLS0tLS0tICAgIFBSRVZJRVcgSU1BR0UgTU9EQUwgRlVOQ1RJT04gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkRGF0YSkge1xuICBwcmV2aWV3SW1hZ2Uuc3JjID0gY2FyZERhdGEuX2xpbms7XG4gIHByZXZpZXdJbWFnZS5hbHQgPSBjYXJkRGF0YS5fbmFtZTtcbiAgcHJldmlld1RpdGxlLnRleHRDb250ZW50ID0gY2FyZERhdGEuX25hbWU7XG4gIG9wZW5Nb2RhbChwcmV2aWV3SW1hZ2VNb2RhbCk7XG59XG5cbi8vIHx8LS0tLS0tLS0tLS0tLS0gICAgSU5JVElBTCBDQVJEUyBFVkVOVCBMSVNURU5FUiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XG5pbml0aWFsQ2FyZHMuZm9yRWFjaChyZW5kZXJDYXJkKTtcblxuLy8gfHwtLS0tLS0tLS0tLS0tLSAgICAgUFJPRklMRSBFRElUIE1PREFMIEZVTkNUSU9OICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcHJvZmlsZVRpdGxlLnRleHRDb250ZW50ID0gcHJvZmlsZVRpdGxlSW5wdXQudmFsdWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlO1xuICBjbG9zZU1vZGFsKHByb2ZpbGVFZGl0TW9kYWwpO1xufVxuXG4vLyB8fC0tLS0tLS0tLS0tLS0tLSAgIEFERCBORVcgQ0FSRCBNT0RBTCBGVU5DVElPTiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuZnVuY3Rpb24gaGFuZGxlQWRkTmV3Q2FyZFN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IGFkZENhcmQgPSB7XG4gICAgbmFtZTogYWRkTmV3Q2FyZFRpdGxlSW5wdXQudmFsdWUsXG4gICAgbGluazogYWRkTmV3Q2FyZExpbmsudmFsdWUsXG4gIH07XG4gIHJlbmRlckNhcmQoYWRkQ2FyZCk7XG4gIGV2dC50YXJnZXQucmVzZXQoKTtcbiAgY2xvc2VNb2RhbChhZGRDYXJkTW9kYWwpO1xuICBmb3JtVmFsaWRhdG9yc1tcImFkZC1jYXJkLWZvcm1cIl0udG9nZ2xlQnV0dG9uU3RhdGUoKTtcbn1cblxuLy8gfHwtLS0tLS0tLS0tLS0tLS0gICBQUk9GSUxFIEVESVQgTU9EQUwgRVZFTlQgTElTVEVORVIgICAtLS0tLS0tLS0tLS0tLS0tLS0tfHxcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gcHJvZmlsZVRpdGxlLnRleHRDb250ZW50O1xuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbiAgb3Blbk1vZGFsKHByb2ZpbGVFZGl0TW9kYWwpO1xuICBmb3JtVmFsaWRhdG9yc1tcInByb2ZpbGUtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG4vLyB8fC0tLS0tLS0tICAgQU5ZIE1PREFMIENMT1NFIEJVVFRPTiBFVkVOVCBMSVNURU5FUiAoVU5JVkVSU0FMIEhBTkRMRVIpIC0tLS0tLS0tfHxcbmNvbnN0IGNsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Nsb3NlXCIpO1xuY2xvc2VCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICBjb25zdCBtb2RhbCA9IGJ1dHRvbi5jbG9zZXN0KFwiLm1vZGFsXCIpO1xuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNsb3NlTW9kYWwobW9kYWwpKTtcbn0pO1xuXG5wcm9maWxlRWRpdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdCk7XG5cbi8vIHx8LS0tLS0tLS0tLS0tLS0tICAgQUREIE5FVyBDQVJEIE1PREFMIEVWRU5UIExJU1RFTkVSICAgLS0tLS0tLS0tLS0tLS0tLS0tLXx8XG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBvcGVuTW9kYWwoYWRkQ2FyZE1vZGFsKSk7XG5cbmFkZE5ld0NhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkTmV3Q2FyZFN1Ym1pdCk7XG5cbi8vIHx8LS0tLS0tLS0tLS0tLS0gICAgIEZPUk1WQUxJREFUSU9OICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xuXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufTtcblxuZW5hYmxlVmFsaWRhdGlvbihjb25maWcpO1xuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImNhcmREYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEltYWdlRWwiLCJhZGRFdmVudExpc3RlbmVyIiwiX2xpa2VCdXR0b24iLCJfaGFuZGxlTGlrZUJ1dHR0b24iLCJfZGVsZXRlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUJ1dHR0b24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfZWxlbWVudCIsInJlbW92ZSIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZW5lcmF0ZUNhcmQiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWwiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiX2Vycm9yTWVzc2FnZUVsIiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsImV2ZXJ5IiwiX2Rpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjYXJkTGlzdEVsIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVFZGl0Rm9ybSIsImZvcm1zIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiYWRkQ2FyZE1vZGFsIiwiYWRkTmV3Q2FyZEZvcm0iLCJhZGROZXdDYXJkQnV0dG9uIiwiYWRkTmV3Q2FyZFRpdGxlSW5wdXQiLCJhZGROZXdDYXJkTGluayIsInByZXZpZXdJbWFnZU1vZGFsIiwicHJldmlld0ltYWdlIiwicHJldmlld1RpdGxlIiwiY2xvc2VNb2RhbEJ5RXNjYXBlIiwiZXZ0Iiwia2V5IiwiY2xvc2VNb2RhbCIsImNsb3NlTW9kYWxPdXRzaWRlIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIm9wZW5Nb2RhbCIsIm1vZGFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbmRlckNhcmQiLCJjYXJkRWxlbWVudCIsImdldENhcmRFbGVtZW50IiwicHJlcGVuZCIsInZhbHVlIiwiZm9ybVZhbGlkYXRvcnMiLCJidXR0b24iLCJjbG9zZXN0IiwicmVzZXQiLCJmb3JtU2VsZWN0b3IiLCJmb3JtRWxlbWVudCIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==